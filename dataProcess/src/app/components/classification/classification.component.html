<div class="p-6 bg-white shadow-lg rounded-lg border border-[#EBD3F8]/20">
  <h2 class="text-xl font-semibold mb-4 text-[#7A1CAC]">Classification</h2>

  <div *ngIf="dataset" class="space-y-6">
    <!-- Tab Navigation -->
    <div class="flex gap-4 mb-6">
      <button (click)="activeTab = 'selection'"
              [class.bg-[#7A1CAC]]="activeTab === 'selection'"
              [class.text-white]="activeTab === 'selection'"
              class="px-4 py-2 rounded-lg transition-all duration-300 
                     hover:bg-[#7A1CAC] hover:text-white border-2 border-[#7A1CAC]">
        Classifier Selection
      </button>
      <button (click)="activeTab = 'results'"
              [class.bg-[#7A1CAC]]="activeTab === 'results'"
              [class.text-white]="activeTab === 'results'"
              [disabled]="!results.accuracy"
              class="px-4 py-2 rounded-lg transition-all duration-300 
                     hover:bg-[#7A1CAC] hover:text-white border-2 border-[#7A1CAC]
                     disabled:opacity-50 disabled:cursor-not-allowed">
        Results & Evaluation
      </button>
    </div>

    <!-- Classifier Selection Tab -->
    <div *ngIf="activeTab === 'selection'" class="space-y-6">
      <!-- Target Column Selection -->
      <div class="p-4 bg-[#EBD3F8]/10 rounded-lg">
        <h3 class="text-lg font-medium text-[#7A1CAC] mb-3">Target Column Selection</h3>
        <select [(ngModel)]="targetColumn"
                class="w-full md:w-auto p-2 border-2 border-[#EBD3F8] rounded-lg 
                       focus:outline-none focus:border-[#7A1CAC] transition-all duration-300">
          <option [value]="null">Select target column</option>
          <option *ngFor="let i of numericColumns" [value]="i">
            {{ dataset.headers[i] }}
          </option>
        </select>
      </div>

      <!-- Classifier Selection -->
      <div class="p-4 bg-[#EBD3F8]/10 rounded-lg">
        <h3 class="text-lg font-medium text-[#7A1CAC] mb-3">Choose Classifier</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <button *ngFor="let clf of ['Decision Tree', 'k-NN', 'NaÃ¯ve Bayes', 'Regression', 'ANN', 'Rule-based']"
                  (click)="selectClassifier(clf)"
                  [class.bg-[#7A1CAC]]="selectedClassifier === clf"
                  [class.text-white]="selectedClassifier === clf"
                  class="px-4 py-2 rounded-lg transition-all duration-300 
                         hover:bg-[#7A1CAC] hover:text-white border-2 border-[#7A1CAC]">
            {{ clf }}
          </button>
        </div>
      </div>

      <!-- Train Button -->
      <button (click)="runClassifier()"
              [disabled]="!selectedClassifier || !targetColumn"
              class="w-full px-6 py-3 bg-[#7A1CAC] text-white rounded-lg 
                     hover:bg-[#8f21c9] transition-all duration-300 
                     disabled:opacity-50 disabled:cursor-not-allowed">
        Train Classifier
      </button>
    </div>

    <!-- Results Tab -->
    <div *ngIf="activeTab === 'results'" class="space-y-6">
      <!-- Performance Metrics -->
      <div class="p-4 bg-[#EBD3F8]/10 rounded-lg">
        <h3 class="text-lg font-medium text-[#7A1CAC] mb-3">Performance Metrics</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="p-3 bg-white rounded-lg shadow-sm">
            <div class="text-sm text-gray-600">Accuracy</div>
            <div class="text-lg font-medium text-[#7A1CAC]">{{ (results.accuracy * 100).toFixed(1) }}%</div>
          </div>
          <div class="p-3 bg-white rounded-lg shadow-sm">
            <div class="text-sm text-gray-600">Precision</div>
            <div class="text-lg font-medium text-[#7A1CAC]">{{ (results.precision * 100).toFixed(1) }}%</div>
          </div>
          <div class="p-3 bg-white rounded-lg shadow-sm">
            <div class="text-sm text-gray-600">Recall</div>
            <div class="text-lg font-medium text-[#7A1CAC]">{{ (results.recall * 100).toFixed(1) }}%</div>
          </div>
          <div class="p-3 bg-white rounded-lg shadow-sm">
            <div class="text-sm text-gray-600">F1 Score</div>
            <div class="text-lg font-medium text-[#7A1CAC]">{{ (results.f1Score * 100).toFixed(1) }}%</div>
          </div>
        </div>
      </div>

      <!-- Confusion Matrix -->
      <div class="p-4 bg-[#EBD3F8]/10 rounded-lg">
        <h3 class="text-lg font-medium text-[#7A1CAC] mb-3">Confusion Matrix</h3>
        <div class="overflow-x-auto">
          <table class="w-full md:w-auto border-collapse rounded-lg overflow-hidden shadow-sm">
            <tr>
              <th class="border border-[#EBD3F8] px-4 py-2 bg-[#EBD3F8]/20"></th>
              <th class="border border-[#EBD3F8] px-4 py-2 bg-[#EBD3F8]/20">Predicted Positive</th>
              <th class="border border-[#EBD3F8] px-4 py-2 bg-[#EBD3F8]/20">Predicted Negative</th>
            </tr>
            <tr>
              <th class="border border-[#EBD3F8] px-4 py-2 bg-[#EBD3F8]/20">Actual Positive</th>
              <td class="border border-[#EBD3F8] px-4 py-2 bg-white text-center">{{ results.confusion[0][0] }}</td>
              <td class="border border-[#EBD3F8] px-4 py-2 bg-white text-center">{{ results.confusion[0][1] }}</td>
            </tr>
            <tr>
              <th class="border border-[#EBD3F8] px-4 py-2 bg-[#EBD3F8]/20">Actual Negative</th>
              <td class="border border-[#EBD3F8] px-4 py-2 bg-white text-center">{{ results.confusion[1][0] }}</td>
              <td class="border border-[#EBD3F8] px-4 py-2 bg-white text-center">{{ results.confusion[1][1] }}</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>